{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 116, "column": 0}, "map": {"version":3,"sources":["file:///home/alebueno/repositorio/Curso_Web3/dapp/services/Web3Services.js"],"sourcesContent":["import ABI from \"./ABI.json\";\nimport Web3 from \"web3\";\n\n//endereço de cntrato na BLC\nconst CONTRACT_ADDRESS = \"0xB30527B524b534d6B69b1Dfb0868EbFD342E8d71\";\n\nexport async function doLogin() {\n    if(!window.ethereum) throw new Error(\"MetaMask não encontrada!\");\n\n    // caso seja encontrada alguma conta solicita todas, so arrai de endereço, nao da pra fazer transação\n    // a metamask vai perguntar ao usuario se ele quer ou não mostrar as contas dele\n    const web3 = new Web3(window.ethereum);\n    const accounts = await web3.eth.requestAccounts();\n    if (!accounts || !accounts.length) throw new Error (\"Carteira não encontrada ou não autorizada!\");\n\n    //se confirmada vamos armazenar no navegador\n    localStorage.setItem(\"wallet\", accounts[0]);\n    return accounts[0];\n\n}\n\n// Função que configura a comunicação com o contrato\nfunction getContract(){\n    const web3 = new Web3(window.ethereum);\n    const from = localStorage.getItem(\"wallet\");\n    return new web3.eth.Contract(ABI, CONTRACT_ADDRESS, {from});\n}\n\n//função que vai enviar a campanha para a blockchain. send chama o metamask pra autororizar\nexport async function addCampaign(getCampaign) {\n    const contract = getContract();\n    return contract.methods.addCampaign(getCampaign.title, getCampaign.description, getCampaign.videoUrl, getCampaign.imageUrl).send();\n}\n\n// usa o call para chamar\nexport async function getLastCampaignId(){\n    const contgract = getContract();\n    return contract.methods.nextId().call(); \n}\n\nexport async function getCampaign(id){\n    const contgract = getContract();\n    return contract.methods.campaign(id).call(); \n}\n\nexport async function donate(id, donation){\n    await doLogin();\n    const contgract = getContract();\n    return contract.methods.donate(id).send({\n        value: Web3.utils.toWei(donation, \"ether\")\n    }\n\n    )\n}"],"names":[],"mappings":";;;;;;;AAAA;AACA;AAAA;;;AAEA,4BAA4B;AAC5B,MAAM,mBAAmB;AAElB,eAAe;IAClB,IAAG,CAAC,OAAO,QAAQ,EAAE,MAAM,IAAI,MAAM;IAErC,qGAAqG;IACrG,gFAAgF;IAChF,MAAM,OAAO,IAAI,2JAAA,CAAA,UAAI,CAAC,OAAO,QAAQ;IACrC,MAAM,WAAW,MAAM,KAAK,GAAG,CAAC,eAAe;IAC/C,IAAI,CAAC,YAAY,CAAC,SAAS,MAAM,EAAE,MAAM,IAAI,MAAO;IAEpD,4CAA4C;IAC5C,aAAa,OAAO,CAAC,UAAU,QAAQ,CAAC,EAAE;IAC1C,OAAO,QAAQ,CAAC,EAAE;AAEtB;AAEA,oDAAoD;AACpD,SAAS;IACL,MAAM,OAAO,IAAI,2JAAA,CAAA,UAAI,CAAC,OAAO,QAAQ;IACrC,MAAM,OAAO,aAAa,OAAO,CAAC;IAClC,OAAO,IAAI,KAAK,GAAG,CAAC,QAAQ,CAAC,uFAAA,CAAA,UAAG,EAAE,kBAAkB;QAAC;IAAI;AAC7D;AAGO,eAAe,YAAY,WAAW;IACzC,MAAM,YAAW;IACjB,OAAO,UAAS,OAAO,CAAC,WAAW,CAAC,YAAY,KAAK,EAAE,YAAY,WAAW,EAAE,YAAY,QAAQ,EAAE,YAAY,QAAQ,EAAE,IAAI;AACpI;AAGO,eAAe;IAClB,MAAM,YAAY;IAClB,OAAO,SAAS,OAAO,CAAC,MAAM,GAAG,IAAI;AACzC;AAEO,eAAe,YAAY,EAAE;IAChC,MAAM,YAAY;IAClB,OAAO,SAAS,OAAO,CAAC,QAAQ,CAAC,IAAI,IAAI;AAC7C;AAEO,eAAe,OAAO,EAAE,EAAE,QAAQ;IACrC,MAAM;IACN,MAAM,YAAY;IAClB,OAAO,SAAS,OAAO,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC;QACpC,OAAO,2JAAA,CAAA,UAAI,CAAC,KAAK,CAAC,KAAK,CAAC,UAAU;IACtC;AAGJ","debugId":null}},
    {"offset": {"line": 174, "column": 0}, "map": {"version":3,"sources":["file:///home/alebueno/repositorio/Curso_Web3/dapp/app/create/page.tsx"],"sourcesContent":["//import Image from \"next/image\";\n\"use client\" // para funcionar codigo javascript no lado do navegador\n\nimport { useState } from \"react\";\nimport { addCampaign, getLastCampaignId } from \"@/services/Web3Services\";\n\n\nexport default function Create() {\n    // usa {} para objetos e aspas para string\n    const [getMessage, setMessage] = useState(\"\");\n    const [getCampaign, setCampaign] = useState({\n        title: \"\",\n        description: \"\",\n        videoUrl: \"\",\n        imageUrl: \"\"\n    });\n\n\n\n\n    // recebe um objeto de evento evt\n    function onInputChange(evt: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) {\n        setCampaign(prevState => ({\n            ...prevState,\n            [evt.target.id]: evt.target.value\n        }));\n    }\n\n    function btnSaveClick() {\n        //setMessage(JSON.stringify(getCampaign));\n        setMessage(\"Salvando a campanha ... aguarde...\");\n        addCampaign(getCampaign)\n            //.then(tx => setMessage(JSON.stringify(tx)))\n            .then(tx => getLastCampaignId())\n            .then(id => setMessage(`Campanha foi salva com o ID ${id}. Em alguns minutos ela estará pronta para receber doaçoes\n                use este link para dibulgala  http://localhost:3000/donate/${id}`)) //note que usamos crase por causa da variavel\n            .catch(err => {\n                console.error(err);\n                setMessage(err.message || \"Erro ao salvar a campanha.\");\n            })\n\n    }\n\n    return (\n        <>\n            <div className=\"container\">\n                <h1 className=\"display-5 fw-bold text-body-emphasis lh-1 mb-3 mt-5\"> Donate Cripto </h1>\n                <p>Preencha os campos para incluir nova Campanha na plataforma</p>\n                <p>Ao término do cadastro, você receberá um link para divultar e realizar pagamento</p>\n                <hr className=\"mb-4\" />\n                <div className=\"form-floating mb-3\">\n                    <input type=\"text\" id=\"title\" className=\"form-control\" onChange={onInputChange} value={getCampaign.title || \"\"} />\n                    <label htmlFor=\"title\">Titulo</label>\n                </div>\n                <div className=\"form-floating mb-3\">\n                    <textarea id=\"description\" className=\"form-control\" onChange={onInputChange} value={getCampaign.description || \"\"} />\n                    <label htmlFor=\"description\">Descrição</label>\n                </div>\n                <div className=\"form-floating mb-3\">\n                    <input type=\"text\" id=\"videoUrl\" className=\"form-control\" onChange={onInputChange} value={getCampaign.videoUrl || \"\"} />\n                    <label htmlFor=\"videoUrl\">URL  do Video</label>\n                </div>\n                <div className=\"form-floating mb-3\">\n                    <input type=\"text\" id=\"imageUrl\" className=\"form-control\" onChange={onInputChange} value={getCampaign.imageUrl || \"\"} />\n                    <label htmlFor=\"imageUrl\">URL da imagem</label>\n                </div>\n                <div className=\"col-6 mb-3\">\n                    <button type=\"button\" className=\"btn btn-primary col-12 p-3\" onClick={btnSaveClick} >Salvar</button>\n                </div>\n                {\n                    getMessage\n                        ? <div className=\"alert alert-success p-3 col-12\" role=\"alert\"> {getMessage} </div>\n                        : <></>\n                }\n            </div>\n        </>\n    );\n}\n"],"names":[],"mappings":"AAAA,iCAAiC;;;;;AAGjC;AACA;AAHA,aAAa,wDAAwD;;;;;AAMtD,SAAS;IACpB,0CAA0C;IAC1C,MAAM,CAAC,YAAY,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC1C,MAAM,CAAC,aAAa,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;QACxC,OAAO;QACP,aAAa;QACb,UAAU;QACV,UAAU;IACd;IAKA,iCAAiC;IACjC,SAAS,cAAc,GAA8D;QACjF,YAAY,CAAA,YAAa,CAAC;gBACtB,GAAG,SAAS;gBACZ,CAAC,IAAI,MAAM,CAAC,EAAE,CAAC,EAAE,IAAI,MAAM,CAAC,KAAK;YACrC,CAAC;IACL;IAEA,SAAS;QACL,0CAA0C;QAC1C,WAAW;QACX,CAAA,GAAA,wHAAA,CAAA,cAAW,AAAD,EAAE,YACR,6CAA6C;SAC5C,IAAI,CAAC,CAAA,KAAM,CAAA,GAAA,wHAAA,CAAA,oBAAiB,AAAD,KAC3B,IAAI,CAAC,CAAA,KAAM,WAAW,CAAC,4BAA4B,EAAE,GAAG;2EACM,EAAE,IAAI,GAAG,6CAA6C;SACpH,KAAK,CAAC,CAAA;YACH,QAAQ,KAAK,CAAC;YACd,WAAW,IAAI,OAAO,IAAI;QAC9B;IAER;IAEA,qBACI;kBACI,cAAA,8OAAC;YAAI,WAAU;;8BACX,8OAAC;oBAAG,WAAU;8BAAsD;;;;;;8BACpE,8OAAC;8BAAE;;;;;;8BACH,8OAAC;8BAAE;;;;;;8BACH,8OAAC;oBAAG,WAAU;;;;;;8BACd,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAM,MAAK;4BAAO,IAAG;4BAAQ,WAAU;4BAAe,UAAU;4BAAe,OAAO,YAAY,KAAK,IAAI;;;;;;sCAC5G,8OAAC;4BAAM,SAAQ;sCAAQ;;;;;;;;;;;;8BAE3B,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAS,IAAG;4BAAc,WAAU;4BAAe,UAAU;4BAAe,OAAO,YAAY,WAAW,IAAI;;;;;;sCAC/G,8OAAC;4BAAM,SAAQ;sCAAc;;;;;;;;;;;;8BAEjC,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAM,MAAK;4BAAO,IAAG;4BAAW,WAAU;4BAAe,UAAU;4BAAe,OAAO,YAAY,QAAQ,IAAI;;;;;;sCAClH,8OAAC;4BAAM,SAAQ;sCAAW;;;;;;;;;;;;8BAE9B,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAM,MAAK;4BAAO,IAAG;4BAAW,WAAU;4BAAe,UAAU;4BAAe,OAAO,YAAY,QAAQ,IAAI;;;;;;sCAClH,8OAAC;4BAAM,SAAQ;sCAAW;;;;;;;;;;;;8BAE9B,8OAAC;oBAAI,WAAU;8BACX,cAAA,8OAAC;wBAAO,MAAK;wBAAS,WAAU;wBAA6B,SAAS;kCAAe;;;;;;;;;;;gBAGrF,2BACM,8OAAC;oBAAI,WAAU;oBAAiC,MAAK;;wBAAQ;wBAAE;wBAAW;;;;;;yCAC1E;;;;;;;;AAK1B","debugId":null}}]
}