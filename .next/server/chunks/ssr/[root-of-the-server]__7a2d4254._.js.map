{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 140, "column": 0}, "map": {"version":3,"sources":["file:///home/alebueno/repositorio/Curso_Web3/dapp/services/Web3Services.js"],"sourcesContent":["import ABI from \"./ABI.json\";\nimport Web3 from \"web3\";\n\n//endereço de cntrato na BLC\nconst CONTRACT_ADDRESS = \"0xB30527B524b534d6B69b1Dfb0868EbFD342E8d71\";\n\nexport async function doLogin() {\n    if(!window.ethereum) throw new Error(\"MetaMask não encontrada!\");\n\n    // caso seja encontrada alguma conta solicita todas, so arrai de endereço, nao da pra fazer transação\n    // a metamask vai perguntar ao usuario se ele quer ou não mostrar as contas dele\n    const web3 = new Web3(window.ethereum);\n    const accounts = await web3.eth.requestAccounts();\n    if (!accounts || !accounts.length) throw new Error (\"Carteira não encontrada ou não autorizada!\");\n\n    //se confirmada vamos armazenar no navegador\n    localStorage.setItem(\"wallet\", accounts[0]);\n    return accounts[0];\n\n}\n\n// Função que configura a comunicação com o contrato\nfunction getContract(){\n    const web3 = new Web3(window.ethereum);\n    const from = localStorage.getItem(\"wallet\");\n    return new web3.eth.Contract(ABI, CONTRACT_ADDRESS, {from});\n}\n\n//função que vai enviar a campanha para a blockchain. send chama o metamask pra autororizar\nexport async function addCampaign(getCampaign) {\n    const contract = getContract();\n    return contract.methods.addCampaign(getCampaign.title, getCampaign.description, getCampaign.videoUrl, getCampaign.imageUrl).send();\n}\n\n// usa o call para chamar\nexport async function getLastCampaignId(){\n    const contgract = getContract();\n    return contract.methods.nextId().call(); \n}\n\nexport async function getCampaign(id){\n    const contgract = getContract();\n    return contract.methods.campaign(id).call(); \n}\n\nexport async function donate(id, donation){\n    await doLogin();\n    const contgract = getContract();\n    return contract.methods.donate(id).send({\n        value: Web3.utils.toWei(donation, \"ether\")\n    }\n\n    )\n}"],"names":[],"mappings":";;;;;;;AAAA;AACA;AAAA;;;AAEA,4BAA4B;AAC5B,MAAM,mBAAmB;AAElB,eAAe;IAClB,IAAG,CAAC,OAAO,QAAQ,EAAE,MAAM,IAAI,MAAM;IAErC,qGAAqG;IACrG,gFAAgF;IAChF,MAAM,OAAO,IAAI,2JAAA,CAAA,UAAI,CAAC,OAAO,QAAQ;IACrC,MAAM,WAAW,MAAM,KAAK,GAAG,CAAC,eAAe;IAC/C,IAAI,CAAC,YAAY,CAAC,SAAS,MAAM,EAAE,MAAM,IAAI,MAAO;IAEpD,4CAA4C;IAC5C,aAAa,OAAO,CAAC,UAAU,QAAQ,CAAC,EAAE;IAC1C,OAAO,QAAQ,CAAC,EAAE;AAEtB;AAEA,oDAAoD;AACpD,SAAS;IACL,MAAM,OAAO,IAAI,2JAAA,CAAA,UAAI,CAAC,OAAO,QAAQ;IACrC,MAAM,OAAO,aAAa,OAAO,CAAC;IAClC,OAAO,IAAI,KAAK,GAAG,CAAC,QAAQ,CAAC,uFAAA,CAAA,UAAG,EAAE,kBAAkB;QAAC;IAAI;AAC7D;AAGO,eAAe,YAAY,WAAW;IACzC,MAAM,YAAW;IACjB,OAAO,UAAS,OAAO,CAAC,WAAW,CAAC,YAAY,KAAK,EAAE,YAAY,WAAW,EAAE,YAAY,QAAQ,EAAE,YAAY,QAAQ,EAAE,IAAI;AACpI;AAGO,eAAe;IAClB,MAAM,YAAY;IAClB,OAAO,SAAS,OAAO,CAAC,MAAM,GAAG,IAAI;AACzC;AAEO,eAAe,YAAY,EAAE;IAChC,MAAM,YAAY;IAClB,OAAO,SAAS,OAAO,CAAC,QAAQ,CAAC,IAAI,IAAI;AAC7C;AAEO,eAAe,OAAO,EAAE,EAAE,QAAQ;IACrC,MAAM;IACN,MAAM,YAAY;IAClB,OAAO,SAAS,OAAO,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC;QACpC,OAAO,2JAAA,CAAA,UAAI,CAAC,KAAK,CAAC,KAAK,CAAC,UAAU;IACtC;AAGJ","debugId":null}},
    {"offset": {"line": 198, "column": 0}, "map": {"version":3,"sources":["file:///home/alebueno/repositorio/Curso_Web3/dapp/app/page.tsx"],"sourcesContent":["\"use client\" // para funcionar codigo javascript no lado do navegador\n\nimport { useRouter } from \"next/navigation\";\nimport { useState } from \"react\";\nimport { doLogin } from \"@/services/Web3Services\";\n\n\nexport default function Home() {\n\n  const { push } = useRouter();\n\n  const [getMessage, setMessage] = useState(\"\");\n\n  //conecta na carteira\n  function btnLoginClick(){\n    setMessage(\"Conectando na carteira...aguarde...\");\n    doLogin()\n      .then(account => push(\"/create\"))\n      .catch(err => {\n        console.error(err);\n        setMessage(err.getMessage);\n      })\n  }\n\n  return (\n    <> \n    <div className=\"container px-4 py-5\"> \n      <div className=\"row flex-lg-row-reverse align-itens-center g-5 py-5\">\n        <div className=\"col-6\">\n          <img src=\"/images/water2.jpg\" className=\"d-block mx-lg-outo img-fluid\" width={300} height={300} />\n        </div>\n        <div className=\"col-6\">\n          <h1 className=\"display-5 fw-bold text-body-emphasis lh-1 mb-3\"> Donate Crypto </h1>\n          <p className=\"lead\"> Plataforma descentralizadas de campanha de doação</p>\n          <p className=\"lead\"> Autentique-se com sua carteira e crie novos contratos</p>\n          <p className=\"lead mb-3\"> Para resgate ou pagamentos use o link do contrato existente</p>\n          <div className=\"d-flex justify-content-start mt-5\">\n            <button type=\"button\" className=\"btn btn-primary btn-lg px-4 me-2 col-12\" onClick={btnLoginClick}>\n              <img src=\"/images/metamask.png\" width={34} className=\"me-2\" />\n              Conectar com a MetamMask\n            </button>\n          </div>\n          {\n            getMessage\n            ?  <div className=\"alert alert-success p-3 col-12\" role=\"alert\"> {getMessage} </div>\n            :<></>\n          }\n        </div>\n      </div>\n    </div>\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA,aAAa,wDAAwD;;;;;;AAOtD,SAAS;IAEtB,MAAM,EAAE,IAAI,EAAE,GAAG,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEzB,MAAM,CAAC,YAAY,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAE1C,qBAAqB;IACrB,SAAS;QACP,WAAW;QACX,CAAA,GAAA,wHAAA,CAAA,UAAO,AAAD,IACH,IAAI,CAAC,CAAA,UAAW,KAAK,YACrB,KAAK,CAAC,CAAA;YACL,QAAQ,KAAK,CAAC;YACd,WAAW,IAAI,UAAU;QAC3B;IACJ;IAEA,qBACE;kBACA,cAAA,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAI,KAAI;4BAAqB,WAAU;4BAA+B,OAAO;4BAAK,QAAQ;;;;;;;;;;;kCAE7F,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;0CAAiD;;;;;;0CAC/D,8OAAC;gCAAE,WAAU;0CAAO;;;;;;0CACpB,8OAAC;gCAAE,WAAU;0CAAO;;;;;;0CACpB,8OAAC;gCAAE,WAAU;0CAAY;;;;;;0CACzB,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCAAO,MAAK;oCAAS,WAAU;oCAA0C,SAAS;;sDACjF,8OAAC;4CAAI,KAAI;4CAAuB,OAAO;4CAAI,WAAU;;;;;;wCAAS;;;;;;;;;;;;4BAKhE,2BACG,8OAAC;gCAAI,WAAU;gCAAiC,MAAK;;oCAAQ;oCAAE;oCAAW;;;;;;qDAC5E;;;;;;;;;;;;;;;;;;;AAOb","debugId":null}}]
}